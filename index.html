<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>EC-24 FP</title>
  <link rel="stylesheet" href="style.css" type="text/css" />
  <link href="https://fonts.googleapis.com/css?family=Nunito|Oxygen" rel="stylesheet">
</head>

<body>

<h1> Monty Hall Game Simulation</h1>
<h4 style="margin-top: -15px; color: #FF6F3C;">
  by Patrick Zwierzynski <br/>
  Tufts University : EC-24 (Fall 2017) Final Project
</h4>
<hr/>

<h2> - A Brief History - </h2>
<div class="History-cont">
  <div class="HistoryPic1">
    <img src="images/monty_LMAD.jpg" class="pic2"/>
  </div>
  <div class="HistoryPar">
    <p style="max-height : 250px;">
      The Monty Hall Problem is a statistical problem based off of a game played
      on an American TV show named "Lets Make a Deal", which aired during the
      1960's and 70's. The problem actually gets its name from the host, Monty
      Hall (shown to the left). The problem was famously answered by Marilyn vos
      Savant (shown to the right), in her weekly printed column of <i> Parade </i>
      titled "Ask Marilyn". Her answer sparked debate from thousands of readers,
      and was even featured in an article on the front page of <i> The New York
      Times </i>. Eventually it was proven that her original answer (which will
      be discussed below) was correct!
    </p>
  </div>
  <div class="HistoryPic2">
    <img src="images/marilyn.png" class="pic2"/>
  </div>
</div>

<h2> - The Problem - </h2>
<div class="Abstract-cont">
  <div class="AbstractPic">
    <img src="images/doors.jpeg" class="pic1"/>
  </div>
  <div class="AbstractPar">
    <p style="padding-left: 5px; margin-top: 5px;">
      The question that was originally asked on Savant's column in 1990, which
      eventually became known as the Monty Hall Problem, is as followed:
      <br><br><b>
      "Suppose you're on a game show, and you're given the choice of three doors.
      Behind one door is a car, behind the others, goats. You pick a door, say
      #1, and the host, who knows what's behind the doors, opens another door,
      say #3, which has a goat. He says to you, "Do you want to pick door #2?"
      Is it to your advantage to switch your choice of doors?"</b> <br/> <br/>

      The answer to the Monty Hall Problem is that it is always better to switch
      doors, under the assumption that the door being revealed to you always has
      a goat behind it. In fact, by always switching doors, the player has a <b>
      two-thirds chance of winning </b>, as opposed to the <b> one-thirds chance
      of winning </b> using the never switching doors strategy. The simulation
      will attempt to replicate these results over many games played.
    </p>
  </div>
</div>

<h2> - Motivation - </h2>
<div class="Motivation-cont">
  <div class="MotivationPar">
    <p style="padding-left: 5px; margin-top: 5px;">
      I had first heard about the Monty Hall Problem during a Game Theory
      lecture relatively early on in the semester. After hearing the answer, I
      was confused as to why always switching doors is the better strategy.
      I realized early on that writing a program to simulate the game can help
      demonstrate its results. More specifically, the simulation will do so by
      running the Monty Hall game using two opposing strategies and compare the
      results of the two. The first strategy is to <b> never switch doors </b>,
      while the other strategy is to <b> always switch doors </b>. The long-term
      behavior of the simulation, i.e., after many games have been played, should
      be consistent with the results described above in "The Problem" section.
      Ultimately, through programming the simulation I hoped to achieve two goals:
    </p>
      <ol>
         <li>
           Develop an intuitive understanding of the answer to the Monty Hall
           Problem in addition to the answer involving Game Theory concepts
           learned.
         </li> <br>
         <li>
           Run the simulation hundreds, even thousands, of times in a relatively
           short amount of time to observe the long-term behavior. This behavior
           will then be compared to the actual results of the problem.
         </li>
      </ol>
  </div>
</div>

<h2> - Simulation - </h2>
<div class="Sim-cont">
  <div class="Instructions">
    <h3> Instructions </h3>
    <p style="max-height: 400px;">
      To run a simulation, simply enter an integer number of games to simulate
      and click the "Run Simulation!" button. <br> <br>

      Each game will be
      simulated once using the <b>Never Switching Strategy</b> and once using the
      <b>Always Switching Strategy</b>. The number of cumulative wins as well as a
      cumulative win percentage, for both strategies is displayed. <br> <br>

      You may stop the simulation using the "Stop Simulation" button, but once
      the simulation is stopped it <b> MAY NOT </b> be resumed again.
    </p>
  </div>
  <div class="Sim">
    <h3> Input Control </h3>
    <form action="#">
      <br>Number of Games:<br>
      <input type="number" name="numgames" value="100"><br><br>
      <input type="button" value="Run Simulation!" onclick="runmain()">
      <input type="button" value="Reset Default" onclick="runreset()"> <br> <br>
      <input type="button" value="Stop Simulation" id="stoy">
    </form>
  </div>
  <div id="output">
    <h3> Simulation Results </h3>
    <div id="gamecount"> Simulating Game: N/A </div>
    <div id="statusD"> Status: Waiting for Input </div>
    <h4> Never Switching Strategy</h4>
    <div id="NoSwitch"> Wins: N/A, %Win: N/A </div>
    <h4> Always Switching Strategy </h4>
    <div id="Switch"> Wins: N/A, %Win: N/A </div>
  </div>
</div>

<h2> - Analysis - </h2>
<div class="Analysis-cont">
  <div class="AnalysisPar1">
    <h3> Intuitive Explanation </h3>
    <p style="padding-left: 5px; margin-top: 5px;">
      As the number of games being simulated increases, we see that the win
      percentages converge towards the results outlined in "The Problem"
      section. More specifically, the Never Switching Strategy converges to
      <b>33.33% or one-third</b>, while the Always Switching Strategy converges
      to <b> 66.67% or two-thirds</b>.

      Through writing the program, I realized why this result makes sense
      intuitively. Say the winning door is chosen randomly by Monty, and the
      player door is chosen randomly by a player. From the perspective on Monty,
      you want to reveal a losing door that neither you nor the player chose. If
      the player and Monty chose different doors, then Monty will reveal the
      third door, and thus the player, who always switches, will choose Monty's
      door and win the game. If Monty and the player chose the same door
      initially, then when the player switches doors eventually, he will no
      longer be selecting the winning door. Therefore, if the player initially
      chooses a door that is different from Monty's door, then the player wins,
      as the rest of the game forces the player to switch to the winning door.
      <b> The probability that the player chooses a door that is different from
      the winning door Monty chose, is two-thirds</b>.
    </p>
  </div>
  <div class="AnalysisPar2">
    <h3> Explanation using Game Theory / Statistical Concepts </h3>
    <p style="padding-left: 5px; margin-top: 5px; font-size: 12px;">
      The Monty Hall Problem can be explained using Bayes's rule. Given two
      random events A and B, Bayes rule can be described as followed:<br>
      $$P(A | B) = {P (B | A) * P(A) \over P(B)}$$
      where <b> P(A | B) </b> is a <b>conditional probability</b> meaning the
      probability that A occurs <i> given </i> that B had occurred. We know
      <b> Monty randomly decides the winning door with probability one-third</b>
      . Without loss of generality, suppose that the player chooses Door 1, and
      Monty will then later reveal Door 2 (a losing door). The player then has
      to then decide whether to stay with Door 1 or switch to Door 3 knowing
      that Door 2 results in a loss. Using Bayes rule, we can calculate the
      conditional probability, i.e., the probability that switching to Door 3
      wins the car <i> given </i> (denoted using "|") that Monty revealed Door 2
      as a losing door: <br>
      $$P(\text{Door 3 wins | Monty opens Door 2}) =
      {P(\text{Monty opens Door 2 | Door 3 wins}) *
       P(\text {Door 3 wins}) \over
      P(\text{Monty opens Door 2})}$$

      To determine <b> P(Monty opens Door 2 | Door 3 wins) </b>, consider the
      state of the game. We know the player has selected Door 1 at the start of
      the game. By the premise of conditional probability, we consider the
      scenario where we are given that Door 3 is the winning door. Because <b>
      Monty always reveals a losing door</b>, and because Monty cannot reveal
      the contents of Door 1 (the door we chose), Monty has no choice but to
      reveal Door 2, and have the player choose between Door 3 (the winning
      door) and Door 1 (the player's original pick). Thus,
      $$P(\text {Monty opens Door 2 | Door 3 wins}) = 1$$

      On the other hand, say we were given that the player's original pick,
      Door 1, wins the game. Then Monty has a choice of either revealing Door 2
      or Door 3 to the player (as both are losing doors). Thus,
      $$P(\text {Monty opens Door 2 | Door 1 wins}) = {1 \over 2}$$

      We can then calculate the <b>P(Monty opens Door 2)</b> by: <br>
      $$P(\text {Monty opens Door 2}) =
      P(\text {Monty opens Door 2 and Door 1 wins}) +
      P(\text {Monty opens Door 2 and Door 3 wins})$$ <br>
      where, <br>
      $$P(\text {Monty opens Door 2 and Door 1 wins}) =
      P(\text {Monty opens Door 2 | Door 1 wins}) *
      P(\text {Door 1 wins})$$
      $$ = {1 \over 2} * {1 \over 3} = {1 \over 6}$$
      $$P(\text {Monty opens Door 2 and Door 3 wins}) =
      P(\text {Monty opens Door 2 | Door 3 wins}) *
      P(\text {Door 3 wins})$$
      $$ = 1 * {1 \over 3} = {1 \over 3}$$
      thus, <br>
      $$P(\text {Monty opens Door 2}) =
      {1 \over 6} + {1 \over 3} = {1 \over 2}$$

      Substituting back into the original equation gives us: <br>
      $$P(\text {Door 3 wins | Monty opens Door 2}) =
      {1 * {1 \over 3} \over {1 \over 2}} = {2 \over 3}$$

      The resulting probability above is consistent with the simulation results.
      Because the argument above was made without loss of generality, i.e.,
      the doors chosen in the example were chosen arbitrarily (and without any
      assumptions), then we see that the strategy of always switching doors will
      win with a probability of two-thirds. The proof for why never switching
      doors results in the lower probability of one-third can be found on pages
      453-454 in our <i> Games, Strategies, and Decision Making </i> textbook by
      Joseph E. Harrington, Jr..
    </p>
  </div>
</div>

<h2> - Final Thoughts - </h2>
<div class="FinalPar">
  <p style="padding-left: 5px; margin-top: 5px;">
    In summary, my final project aimed to help explain and understand the
    results and long term behavior of playing the Monty Hall game through
    both simulation as well as Game Theory concepts. All results were consistent
    in showing that the strategy of always switching doors is best. I had
    a lot of fun making this project, especially when it came to using
    techniques that I had learned from different disciplines ranging from
    computer science to statistics to game theory. <br> <br>
    A possible next step could be to simulate/calculate the results of the
    Monty Hall game where the player has to choose between N doors rather than
    3. Or perhaps if there were multiple winning doors as opposed to one.
  </p>
</div>

<hr/>
<h4> References </h4>
<ul style="margin-top: -20px;">
  <li>
    <i> Games, Strategies, and Decision Making </i> by Joseph E.
    Harrington, Jr.
  </li>
  <li>
    <a href="https://en.wikipedia.org/wiki/Monty_Hall_problem" target="_blank">
      Monty Hall problem - Wikipedia
    </a>
  </li>
  <li>
    <a href="https://en.wikipedia.org/wiki/Marilyn_vos_Savant" target="_blank">
      Marilyn vos Savant - Wikipedia
    </a>
  </li>
  <li>
    <a href="https://en.wikipedia.org/wiki/Bayes%27_theorem" target="_blank">
      Bayes' Theorem - Wikipedia
    </a>
  </li>
</ul>

<script>

function runmain() {

  document.getElementById("stoy").addEventListener("click", midstop);

  var count   = document.getElementById("gamecount");
  var statusD   = document.getElementById("statusD");
  var outswitch = document.getElementById("Switch");
  var noswitch  = document.getElementById("NoSwitch")
  var numgames  = document.querySelector('input[type="number"]');
  numgames = numgames.value;
  var initcount = numgames; var isDone = false;
  var win1 = 0; var win2 = 0;
  var iStr1 = ""; var iStr2 = ""; var iStr3 = "<b>Running!</b>";

  function winNoSwitch () {
    //returns true if win, false otherwise.
    // randomly choose the winning door (1, 2, or 3)
    var winnerDoor = Math.floor(Math.random() * 3) + 1;
    // randomly choose a door (1, 2, or 3)
    var playerDoor = Math.floor(Math.random() * 3) + 1;
    // because we are not switching, check if door player chose is
    // the winning door.
    return (winnerDoor == playerDoor);
  }

  function winSwitch () {
    //returns true if win, false otherwise.
    // randomly choose the winning door (0, 1, or 2)
    var winnerDoor = Math.floor(Math.random() * 3) + 1;
    // randomly choose a door (0, 1, or 2)
    var playerDoor = Math.floor(Math.random() * 3) + 1;
    // From the perspective on Monty, you want to reveal the door that neither
    // you nor the player chose. If the player and Monty chose different doors,
    // then Monty will reveal the third door, and thus the player, who always
    // switches, will choose Monty's door. If Monty and the player chose the
    // same door initially, then when the player switches doors eventually, he
    // will no longer be selecting the winning door. Therefore if their guesses
    // were initially different, then player wins, else he losses.
    return (playerDoor != winnerDoor);
  }

  sim = function() {
    let totalgames = initcount - numgames + 1;
    if (winNoSwitch()) {win1++;}
    if (winSwitch()) {win2++;}
    if (numgames == 1) {iStr3 = "Done!"}
    iStr1 = ((win1/totalgames) * 100).toFixed(2).toString();
    iStr2 = ((win2/totalgames) * 100).toFixed(2).toString();
    count.innerHTML = "Simulating Game: " + totalgames.toString();
    statusD.innerHTML = "Status: " + iStr3
    noswitch.innerHTML = "Wins: " + win1.toString() + ", %Win: " + iStr1 + "%";
    outswitch.innerHTML = "Wins: " + win2.toString() + ", %Win: " + iStr2 + "%";
    numgames--;
    if ((numgames > 0) && (!isDone)) {
      window.setTimeout(sim, 25);
    }
  };
  sim();

  function midstop () {
    isDone = true; iStr3 = "Stopped!"
  }

}

function runreset() {
  var count = document.getElementById("gamecount");
  var statusD   = document.getElementById("statusD");
  var outswitch = document.getElementById("Switch");
  var noswitch  = document.getElementById("NoSwitch");
  count.innerHTML   = "Simulating Game: N/A"
  statusD.innerHTML = "Status: N/A"
  outswitch.innerHTML = "Wins: N/A, %Win: N/A"
  noswitch.innerHTML  = "Wins: N/A, %Win: N/A"
}

</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML'></script>
</body>

</html>
